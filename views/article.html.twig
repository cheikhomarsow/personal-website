{% extends 'layout.html.twig' %}

{% block content %}
    <main class="article_page">
       <div class="article">
           {% if tokenExist is defined and tokenExist == true %}
               <h3 class="title_article">
                   {% autoescape false %}
                       {{ article.title | striptags }}
                   {% endautoescape %}
               </h3>
               <p class="resume_autor">By <span class="autor">{{autor.username}}</span> - <span class="date">{{ article.date | date("M d Y") }}</span>&nbsp;&nbsp;<img class="icon_comment" src="assets/img/chat2.png">&nbsp;&nbsp;</p>
               <div class="img">
                   <img src="{{ article.file }}" alt="article_img">
               </div>
               <div class="content_article">
                   <p>
                       {% autoescape false %}
                           {{ article.content | raw }}
                       {% endautoescape %}
                   </p>
               </div>
               <div class="comment-box">
                   {% if isLog is defined and isLog == true %}
                       <h4 class="title">Commentaires</h4>
                       <div class="available_comment">
                            {% if comments is defined and comments is not empty %}
                                {% for comment in comments %}
                                    <p><span class="userComment">{{ comment.userComment }} :</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;{{ comment.contentComment | nl2br }}</p>
                                {% endfor %}
                                {% else %}
                                    <p class="zeroComment">Aucun commentaire pour lâ€™instant.</p>
                            {% endif %}
                       </div>
                       <div class="comment">
                           <p class="error_comment"></p>
                           <form action="?action=article&token={{ article.token }}" name="form-comment" id="formComment" METHOD="POST">
                               <input type="text" class="none articleIdAjax" name="article_id" value="{{ article.id }}"/>
                               <input type="text" class="none articleUserAjax" name="user_id" value="{{ user.id }}"/>
                               <textarea class="contentCommentAjax" name="content_comment" placeholder="Votre commentaire..."></textarea>
                               <button type="submit" class="button"><img src="assets/img/chat.png">&nbsp;&nbsp;Commenter</button>
                           </form>
                       </div>
                       {% else %}
                           <div class="cantComment">
                               <a href="?action=reglog&from=article&token={{ article.token }}">
                                   Connectez-vous pour pouvoir commenter
                               </a>
                           </div>

                   {% endif %}
               </div>
               {% else %}
                    <div>Cet article n'est plus disponible</div>
           {% endif %}
       </div>
    </main>
{% endblock %}
